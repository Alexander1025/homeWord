<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<div id="num"></div>
	<img src="" alt="" data-src="http://img2.3lian.com/2014/f7/5/d/22.jpg">
	<img src="" alt="" data-src="http://img2.3lian.com/2014/f7/5/d/22.jpg">
	<img src="" alt="" data-src="http://img2.3lian.com/2014/f7/5/d/22.jpg">
	<img src="" alt="" data-src="http://img2.3lian.com/2014/f7/5/d/22.jpg">
	<img src="" alt="" data-src="http://img2.3lian.com/2014/f7/5/d/22.jpg">
	<img src="" alt="" data-src="http://img2.3lian.com/2014/f7/5/d/22.jpg">
	<img src="" alt="" data-src="http://img2.3lian.com/2014/f7/5/d/22.jpg">
	<img src="" alt="" data-src="http://img2.3lian.com/2014/f7/5/d/22.jpg">
	<script type="text/javascript">
	var imgList = document.getElementsByTagName("img");
	var perNum = document.getElementById("num");

	var arr = [];
	for(var i = 0; i < imgList.length; i++) {
		arr[i] = new Image();
		arr[i].src = imgList[i].getAttribute("data-src");
		arr[i].onload = function() {
			preloadImg();
		}
	}
	var num = 0;
	function preloadImg() {
		num++;
		var percent = parseInt(num / imgList.length * 100) + "%";
		perNum.innerHTML = percent;
		// alert(percent)
		if(num == imgList.length) {
			// alert("图片准备好了！");
			for(var j = 0; j<imgList.length; j++) {
				imgList[j].src = arr[j].src;
			}
		}
	}
	</script>
</body>
</html>