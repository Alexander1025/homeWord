<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>sina微博</title>
	<style type="text/css">
		*{
			margin:0;
			padding: 0;
			font-family: "Microsoft Yahei";
			color:#333;
		}
		body {
			background-color: #3383aa;
		}
		ul,ol {
			list-style: none;
		}
		#container {
			width:600px;
			margin:20px auto;
			border-radius: 4px;
			padding:20px 40px 10px; 
			background-color: #fff;
		}
		textarea {
			resize: none;
			width:580px;
			height: 100px;
			padding:8px;
			font-size: 16px;
			-webkik-appearance:none;
			outline: none;
			box-shadow:inset 0 0 5px 0 #ccc;
		}
		textarea:focus {
			border:1px solid #f7671d;
			box-shadow: none;
		}
		.user-bar {
			font-size: 14px;
			margin-bottom: 20px;
		}
		.user-bar span,.user-bar input {
			vertical-align: middle;
		}
		.user-bar input {
			-webkik-appearance:none;
			outline: none;
			border:1px solid #999;
			font-size: 14px;
			box-shadow:inset 0 0 3px 0 #ccc;
			padding: 4px 8px;
		}
		.user-bar input:focus {
			box-shadow: none;
			border:1px solid #f7671d;
		}
		.word-tips {
			/*text-align: right;*/
			margin-top: 12px;
			overflow: hidden;
			font-size: 14px;
			line-height: 28px;
		}
		.left-tips {
			float: left;
			line-height: 30px;
		}

		.submit-button {
			float: right;
			margin-right: 4px;
			width:82px;
			height: 30px;
			line-height: 30px;
			text-align: center;
			background-color: #ff8140;
			border-radius: 2px;
			color:#fff;
			transition:background 1s;
		}
		.submit-button:hover {
			background-color: #f7671d;
		}
		.left-tips span {
			font-family: Constantia, Georgia;
			font-weight: bold;
			font-size: 18px;

		}
		#msgList {
			margin-top: 20px;
			padding-bottom: 8px;
		}
		#msgList li {
			overflow: hidden;
			padding-bottom: 1px;
		}
		#msgList li div{
			display: inline-block;
			vertical-align: top;
			*display: inline;
			*zoom:1;
		}
		.logo {
			margin-right: 18px;
		}
		.user-info {
			width:520px;
			margin-bottom: 20px;
			font-size: 16px;
		}
		.user-info .txt {
			line-height: 1.5;
			color:#666;
		}
		a {
			text-decoration: none;
		}
		.user-name {
			overflow: hidden;
		}
		.del-btn
		{
			font-size: 14px;
			color:#666;
		}
		.user-name span {
			float: left;
		}
		.user-info span {
			font-weight: bold;
			color:#333;
		}
		.user-info a {
			float: right;
		}
		.user-info a:hover{
			color:#eb7350;
		}
		.logo img
		{
			width: 50px;
			height: 50px;
			border-radius: 50%;
		}
		*::selection {
			background-color:#ff8140;
			color:#fff;
		}
	</style>
</head>
<body>
	<div id="container">
		<form>
			<p class="user-bar">
				<label>用户：<input type="text" id="userName"></label>
			</p>
			<textarea id="msg"></textarea>
			<p class="word-tips">
				<span class="left-tips">还可以输入<span id="wordNumber">140</span>个字</span>
				<a href="javascript:void(0);" class="submit-button" id="submitBtn">发布</a>
			</p>
		</form>
		<ul id="msgList">
			<!-- <li>
				<div class="logo">
					<img src="img/1.gif">
				</div>
				<div class="user-info">
					<p class="user-name"><span>我叫小明</span><a href="javascript:void(0);" class="del-btn">删除</a></p>
					<p class="txt">Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consectetur adipisicing eli</p>
				</div>
			</li> -->
		</ul>
	</div>
	<script src="jquery-1.11.3.min.js"></script>
	<script type="text/javascript">
	//发布
	$("#submitBtn").on("click",function() {
		//获取表单的值
		var usernameValue = $("#userName").val();
		var msgValue = $("#msg").val();
		//去掉首尾空格
		usernameValue = $.trim(usernameValue);
		msgValue = $.trim(msgValue)

		//判断用户名或者内容是否为空
		if(usernameValue == "") {
			$("#userName").focus();
		}else if(msgValue == "") {
			$("#msg").focus();
		}

		//用户名跟内容都不为空的
		if(usernameValue != "" && msgValue != "" ) {
			//创建节点
			var $list = $("<li></li>");
			var h = '<div class="logo">'+
						'<img src="img/1.gif">'+
					'</div>'+
					'<div class="user-info">'+
						'<p class="user-name"><span>'+usernameValue+'</span><a href="javascript:void(0);" class="del-btn">删除</a></p>'+
						'<p class="txt">'+msgValue+'</p>'+
					'</div>';
			$list.html(h);
			// $("#msgList").prepend($list);
			//插入到文档
			$list.prependTo($("#msgList")).hide().slideDown(600);

			//重置
			$("#userName").val("").focus();
			$("#msg").val("");
			$("#wordNumber").text("140");
		}	
	})
	//使用事件委托
	$("#msgList").on("click",".del-btn",function() {
		//li --- >$(this).parent().parent().parent();
		$(this).parents("li").slideUp(600,function(){
			$(this).remove();
		});
	})

	//检测输入内容字数的变化
	$("#msg").on("input propertychange",function() {
		var t = 140 - $(this).val().length;
		$("#wordNumber").text(t);
	})

	//通过组合键 shift enter
	$(document).on("keypress", function(e) {
		// console.log(e);
		//组合键 shift enter
		if(e.shiftKey && e.keyCode == 13) {
			//事件模拟
			$("#submitBtn").trigger("click");
		}
	})
	</script>
</body>
</html>


















