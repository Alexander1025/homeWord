<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>三级联动</title>
</head>
<body>
	<select name="" id="province">
		<option value="">省</option>
		
	</select>
	<select name="" id="city">
		<option value="">市</option>
	</select>
	<select name="" id="town">
		<option value="">区</option>
	</select>
	<script src="china.js"></script>
	<script>
		function $(id) {
			return document.getElementById(id);
		}
		
		var province = $("province");
		var city = $("city");
		var town = $("town");
		
		//将json格式的字符串转换成对象
		var chinaArea = JSON.parse(chinaArea);
//		var chinaArea1 = (new Function("return " + chinaArea +";")());
//		var chinaArea2 = eval("("+ chinaArea +")");
		//对象的访问法  1.点访问法 2.[]括号访问法
		var provinceList = chinaArea.china.province;
		//生成省份option
		for(var i = 0; i < provinceList.length; i++) {
			//生成节点
			var option = document.createElement("option");
			option.innerHTML = provinceList[i]["-name"];
			//添加到select中去
			province.appendChild(option);	
		}
		var cityList = null;
		province.onchange = function() {
			//添加option之前先将之前的城市清空掉
			city.innerHTML = "<option>市</option>";
			town.innerHTML = "<option>区</option>";
			//生成城市option ,遍历当前省份所有的城市
			if(this.selectedIndex > 0) {
				cityList = provinceList[this.selectedIndex - 1].city;
				for(var i = 0; i < cityList.length; i++ ) {
					var option = document.createElement("option");
					option.innerHTML = cityList[i]["-name"];
					city.appendChild(option);
				}
	//			alert(this.selectedIndex);
//				console.log(provinceList[this.selectedIndex - 1]);
			}
		}
		
		city.onchange = function () {
			town.innerHTML = "<option>区</option>";
			if(this.selectedIndex > 0) {
				for(var i = 0; i < cityList[this.selectedIndex - 1].county.length; i++) {
					var option = document.createElement("option");
					option.innerHTML = cityList[this.selectedIndex - 1].county[i]["-name"];
					town.appendChild(option);
				}
				
				console.log(cityList[this.selectedIndex - 1]);
			}
			
		}
	</script>
</body>
</html>













