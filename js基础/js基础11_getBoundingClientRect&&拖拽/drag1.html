<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			#block {
				width:100px;
				height: 100px;
				background-color: blue;
				position: absolute;
				left:20px;
				top:20px;
			}
		</style>
	</head>
	<body>
		<div id="block">
			
		</div>
		<div>
			e.clientX,
			e.clientY 
			就是触发事件（click,dblclick,mousedown....）时的鼠标的视口坐标
		</div>
		<script>
			var block = document.getElementById("block");
			//事件冒泡，捕获
			//鼠标按下的时候
			block.onmousedown = function(e) {
				var e = e || window.event;//兼容写法，低版本的ie不支持事件对象，只有全局的事件window.event;
//				console.log(e.clientX,e.clientY);//初始的位置，视口坐标	
				//求出鼠标点下到目标元素（拖拽的块）的左边和上边border的距离
				var oWidth = e.clientX - block.offsetLeft;
				var oHeight = e.clientY - block.offsetTop;
				
				document.onmousemove = function(e) {
					var e = e || window.event;
					//再求出left,top
					var oLeft = e.clientX - oWidth;
					var oTop = e.clientY - oHeight;
					//判断边界
					if(oLeft < 0) {
						oLeft = 0;
					}else if(oLeft > document.documentElement.clientWidth - block.offsetWidth) {					
						oLeft = document.documentElement.clientWidth - block.offsetWidth
					}
					if(oTop < 0) {
						oTop = 0;
					}else if(oTop > document.documentElement.clientHeight - block.offsetHeight ) {
						oTop = document.documentElement.clientHeight - block.offsetHeight
					}
					block.style.left = oLeft + "px";
					block.style.top = oTop + "px";
				}
				
				document.onmouseup = function() {
					document.onmousemove = null;
				}
			}
		</script>
	</body>
</html>













